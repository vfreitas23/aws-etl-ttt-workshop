
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.11">
    
    
      
        <title>GLUE (STUDIO) STREAMING - Amazon ETL Train-The-Trainer Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c5ef100.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-understanding-the-streaming-resources-provided-cloudformation-scripts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Amazon ETL Train-The-Trainer Workshop" class="md-header__button md-logo" aria-label="Amazon ETL Train-The-Trainer Workshop" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Amazon ETL Train-The-Trainer Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GLUE (STUDIO) STREAMING
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vfreitas23/aws-etl-ttt-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    vfreitas23/aws-etl-ttt-workshop
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Amazon ETL Train-The-Trainer Workshop" class="md-nav__button md-logo" aria-label="Amazon ETL Train-The-Trainer Workshop" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Amazon ETL Train-The-Trainer Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vfreitas23/aws-etl-ttt-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    vfreitas23/aws-etl-ttt-workshop
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../000-Intro/000-intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          How to Start?
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="How to Start?" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          How to Start?
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/001-intro/" class="md-nav__link">
        Intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          AWS Event
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="AWS Event" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          AWS Event
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/AWSEvent/002-ee-account-setup/" class="md-nav__link">
        Account Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/AWSEvent/003-cloud9-enviroment-setup/" class="md-nav__link">
        Prepare the Enviroment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Self Paced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Self Paced" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Self Paced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/004-signup-aws/" class="md-nav__link">
        Sign Up for AWS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/005-create-iam-user/" class="md-nav__link">
        Create IAM User
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/006-deploy-cfn/" class="md-nav__link">
        Deploy CloudFormation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/007-cloud9-enviroment-setup/" class="md-nav__link">
        Prepare the Enviroment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Part 1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 1" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Part 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../01-MySQL-TPCDS/01-mysql-tpcds/" class="md-nav__link">
        TPCDS & RDS MySQL Lab
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Part 2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 2" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Part 2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../02-GlueComponentsLab/02-glue-components-lab/" class="md-nav__link">
        GLUE DATABASE, TABLES, CONNECTIONS, CRAWLERS, CLASSIFIERS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Part 3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 3" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Part 3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          GLUE (STUDIO) STREAMING
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        GLUE (STUDIO) STREAMING
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-understanding-the-streaming-resources-provided-cloudformation-scripts" class="md-nav__link">
    1. Understanding the Streaming Resources Provided (CloudFormation &amp; Scripts)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-validating-streaming-job-logic-and-data-glue-studio-dummy-job" class="md-nav__link">
    2. Validating Streaming Job Logic and Data (Glue Studio Dummy Job)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-creating-the-glue-streaming-job-cloning-jobs" class="md-nav__link">
    3. Creating the Glue Streaming Job (Cloning Jobs!)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Part 4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 4" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Part 4
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../04-OrchestrationLab/04-orchestration-lab/" class="md-nav__link">
        ORCHESTRATION & DATA ANALYSIS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Part 5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 5" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Part 5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../05-GlueStudioNotebookLab/05-gstudio-notebook-lab/" class="md-nav__link">
        MACHINE LEARNING WITH GLUE & GLUE STUDIO NOTEBOOKS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Part 6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 6" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Part 6
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../06-StepFunctionsLab/06-step-functions-lab/" class="md-nav__link">
        WORKFLOW ORCHESTRATION WITH AWS STEP FUNCTIONS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Part 7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 7" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Part 7
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../07-DataBrewLab/07-databrew-lab/" class="md-nav__link">
        DATA QUALITY & PREPARATION WITH AWS GLUE DATABREW
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-understanding-the-streaming-resources-provided-cloudformation-scripts" class="md-nav__link">
    1. Understanding the Streaming Resources Provided (CloudFormation &amp; Scripts)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-validating-streaming-job-logic-and-data-glue-studio-dummy-job" class="md-nav__link">
    2. Validating Streaming Job Logic and Data (Glue Studio Dummy Job)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-creating-the-glue-streaming-job-cloning-jobs" class="md-nav__link">
    3. Creating the Glue Streaming Job (Cloning Jobs!)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/vfreitas23/aws-etl-ttt-workshop/edit/master/docs/03-StreamingLab/03-streaming-lab.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="toc_0" align="center">
GLUE (STUDIO) STREAMING</h1>

<p>The Part 3 - Glue (Studio) Streaming of the ETL Train the Trainer workshop is where you are going to use AWS Glue Studio Graphical Interface for the first time.</p>
<p>You are going to use Glue Studio do build 2 jobs here. The first job is a <em>dummy</em> Glue Streaming Job that will validate the JOIN between the <strong>customer</strong> RDS table and a <strong>web_page</strong> CSV data that you uploaded earlier to S3. </p>
<p>Note: This CSV data is basically a representation of the actual <strong>web-page-streaming-table</strong> (with the different of that one being in JSON format) that you will use in real Glue Streaming Job</p>
<p>Apart from validate the JOIN between datasets, this <em>dummy</em> job will also validate the SQL code used in the SQL Transform node of this lab. If validation succeeds, you will then be able to Preview the Data before outputting it or, in this case, before building the real Glue Streaming Job.</p>
<h4 id="1-understanding-the-streaming-resources-provided-cloudformation-scripts"><strong>1.</strong> Understanding the Streaming Resources Provided (CloudFormation &amp; Scripts)<a class="headerlink" href="#1-understanding-the-streaming-resources-provided-cloudformation-scripts" title="Permanent link">&para;</a></h4>
<p>For this lab to work, the CloudFormation template provided few resources for you already.</p>
<p><strong>Kinesis Data Stream</strong></p>
<p>A Kinesis Data Stream named <strong>etl-ttt-demo-stream</strong> has been added already which will receive the stream of data from a script you will run later on this lab. Click here <add link> to explore the Kinesis Data Stream if you want.</p>
<p><img alt="KINESIS STREAM" src="../images/studio-kinises-data-stream.png" /></p>
<p><strong>Cataloged Streaming Table</strong></p>
<p>As you already saw it, a table named <strong>etl-ttt-demo-stream</strong> has been created for you with a proper schema definition and all the necessary settings. You can see the details of this table in the AWS Glue Console <link>.</p>
<p>Here's a snapshot of that table's schema.</p>
<p><img alt="WEP-PAGE SCHEMA" src="../images/studio-web-page-table-schema.png" /></p>
<p><strong>Kinesis Data Ingestion Script (python)</strong></p>
<p>As mentioned, you will be running the following script in order to simulate streaming data being added to your Kinesis Data Stream <strong>etl-ttt-demo-stream</strong></p>
<p><img alt="INGESTION SCRIPIT" src="../images/studio-kinises-ingestion-script.png" /></p>
<p>To download the script (and to take a loot at it), run the following commands:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span> ~/environment/ttt-demo/
aws s3 cp s3://ee-assets-prod-us-east-1/modules/31e125cc66e9400c9244049b3b243c38/v1/downloads/etl-ttt-workshop/PutRecord_Kinesis.py .
cat PutRecord_Kinesis.py
</code></pre></div>

<p></br></p>
<h4 id="2-validating-streaming-job-logic-and-data-glue-studio-dummy-job"><strong>2.</strong> Validating Streaming Job Logic and Data (Glue Studio Dummy Job)<a class="headerlink" href="#2-validating-streaming-job-logic-and-data-glue-studio-dummy-job" title="Permanent link">&para;</a></h4>
<p>Let's start building the <strong>dummy</strong> job to validate our Glue Streaming Job logic.</p>
<p>From the AWS Glue Console, click on AWS Glue Studio under the ETL section in the far left menu.</p>
<p align="center">
 <img src=images/studio-job-menu.png>
</p>

<p>This will take you to the AWS Glue Studio Console where you will be authoring the jobs graphically. For that, click on Jobs on the far left menu, select <strong>Visual with a blank</strong> canvas option and click on <strong>Create</strong>.</p>
<p><img alt="DUMMY JOB" src="../images/studio-create-dummy-job.png" /></p>
<p>You will be presented with a blank canva. The first thing you must do there is to rename you job. Just click where it says <strong>"Untitled job"</strong>
, type <strong>dummy-streaming-job</strong> and click out the Job name box.</p>
<p><img alt="BLANK CANVAS" src="../images/studio-blank-canvas.png" /></p>
<p>Now, the next thing you must do, is to set your jobs detail. Click on the tab <strong>Job details</strong> tab and set the following configurations:</p>
<ul>
<li>Under <strong>IAM role</strong> select <strong>AWSGlueServiceRole-etl-ttt-demo</strong></li>
<li>Check the <strong>Automatically scale the number of workers</strong> option (GA regions only, otherwise set <strong>number of workers</strong> to <strong>4</strong>)</li>
<li>Under <strong>Job bookmark</strong> select <strong>Disable</strong></li>
<li>Set <strong>Number of retries</strong> to <strong>0</strong></li>
</ul>
<p>Note: In production environments, you want to enable the bookmark and set retries to bigger than 0.</p>
<p>You don't need to change any other settings here, but you should take some time to explore what settings are available in this tab. When you are done exploring, click <strong>Save</strong> on the upper right to save the changed settings.</p>
<p>Click the <strong>Visual</strong> tab again to go back to visual editor. You should see 3 dropdown buttons: <strong>Source</strong>, <strong>Transform</strong>, and <strong>Target</strong>. Let's start creating the following 2 sources:</p>
<p><strong>Web Page Source</strong></p>
<p>For the <strong>Web Page CSV</strong> source, click on the <strong>Source</strong> dropdown icon and choose <strong>Amazon S3</strong> in dropdown list. Click on the node that has been automatically added to the canvas to highlight it. Make the following changes to it:</p>
<ul>
<li>Click <strong>Node properties</strong> tab</li>
<li>Set <strong>Name</strong> to <strong>Web Page S3</strong></li>
<li>Click <strong>Data source properties - S3</strong> tab</li>
<li>Under <strong>S3 source type</strong> select <strong>S3 location</strong></li>
<li>Set <strong>S3 URL</strong> to: <em>s3://${BUCKET_NAME}/etl-ttt-demo/csv_tables/web_page.csv</em> - (use the <strong>Browse S3</strong> bucket to navigate.)</li>
<li>Uncheck the <strong>Recursive</strong> option</li>
<li>Click <strong>Infer schema</strong> button at the bottom</li>
<li>Click on <strong>Output schema</strong> tab to see schema infered, then click <strong>Save</strong></li>
</ul>
<p><strong>Customer RDS Source</strong></p>
<p>For the <strong>Customer RDS</strong> source, click on the <strong>Source</strong> dropdown icon and choose <strong>AWS Glue Data Catalog</strong> in the dropdown list.</p>
<ul>
<li>Click <strong>Node properties</strong> tab</li>
<li>Change Name to <strong>Customer RDS</strong></li>
<li>Click <strong>Data source properties - Data Catalog</strong> tab</li>
<li>Under <strong>Database</strong> select <strong>glue_ttt_demo_db</strong></li>
<li>Under <strong>Table</strong> select <strong>rds_crawled_tpcds_customer</strong></li>
<li>Click on <strong>Output schema</strong> tab to see schema, then click <strong>Save</strong></li>
</ul>
<p><img alt="SOURCES ADDED" src="../images/studio-canvas-sources-added.png" /></p>
<!-- [SHOW THE CONNECTION IN GLUE AND SHOW CUSTOM CONNECTOR - SEE WHAT'S BETTER - MENTION MARKETPLACE CONNECTORS] -->

<p>To join both datasets, click on the <strong>Web Page S3</strong> node first to highlight it, then click on <strong>Transform</strong> dropdown icon.</p>
<p>Note: You will notice there are pre-build transformations and custom transformations. Glue Studio is designed to be used by developers who could write custom <strong>Apache Spark, Glue and SQL code</strong>, but it also provides pre-build common transformations. For this lab you wil lbe using a custom SQL Transform to write your own SQL Join code.</p>
<p>In the list of transforms that appears, scroll to the bottom and choose <strong>SQL</strong>. A new <strong>SQL</strong> node will be linked to the <strong>Web Page S3</strong> node. Click on this new <strong>SQL</strong> node to highligt it and do the following:</p>
<ul>
<li>Click <strong>Node properties</strong> tab</li>
<li>Under <strong>Node parents</strong>, select <strong>Customer RDS</strong> by clicking the checkbox next to it</li>
<li>Click <strong>Transform tab</strong><ul>
<li>Set Input sources <strong>Web Page S3</strong> with <strong>Spark SQL aliases</strong> value to <strong>webpage</strong></li>
<li>Set Input sources <strong>Customer RDS</strong> with <strong>Spark SQL aliases</strong> value to <strong>cust</strong></li>
<li>Copy the following code to SQL query and click <strong>Save</strong></li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="n">cust</span><span class="p">.</span><span class="n">c_first_name</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">cust</span><span class="p">.</span><span class="n">c_last_name</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">full_name</span><span class="p">,</span><span class="w"></span>
<span class="n">cust</span><span class="p">.</span><span class="n">c_email_address</span><span class="p">,</span><span class="w"></span>
<span class="k">count</span><span class="p">(</span><span class="n">webpage</span><span class="p">.</span><span class="n">wp_char_count</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_clicks</span><span class="w"></span>
<span class="k">from</span><span class="w"> </span><span class="n">cust</span><span class="w"></span>
<span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">webpage</span><span class="w"></span>
<span class="k">on</span><span class="w"> </span><span class="n">cust</span><span class="p">.</span><span class="n">c_customer_sk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">webpage</span><span class="p">.</span><span class="n">wp_customer_sk</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="mi">1</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="c1">--remove the where clause after preview!!</span>
<span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="w"></span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">total_clicks</span><span class="w"> </span><span class="k">desc</span><span class="w"></span>
</code></pre></div>

<ul>
<li>Click on <strong>Data Preview</strong> tab</li>
<li>Click on the <strong>Start data preview session</strong> button there.</li>
<li>In the pop-up window that will open, choose the IAM role <strong>AWSGlueServiceRole-etl-ttt-demo</strong></li>
<li>Wait for <strong>Data Preview</strong> to finish (it takes about 5 minutes to complete)</li>
</ul>
<p>Note: Preview the query with <strong>where 1=2</strong> first to make previewing faster and to avoid issues. If issues happen, close this job and clone it into a new one (clone steps is following).</p>
<ul>
<li>Once preview is completed, remove the <strong>where 1=2</strong> clause.</li>
<li>Click on the <strong>Data Preview</strong> tab again to see the data there.</li>
</ul>
<p>Note that that only relevant columns were brought from the SQL query.</p>
<ul>
<li>Click on <strong>Output schema</strong> tab to see schema,</li>
</ul>
<p>Note that you have 2 outputs: <strong>Output 1</strong> and <strong>Output 2</strong>.</p>
<ul>
<li>Click on the <strong>Use datapreview schema</strong> button that you see right there in the <strong>Output schema</strong> tab.</li>
</ul>
<p>Note that the schema now matches only the relevant columns of the query. Click <strong>Save</strong>.</p>
<p><img alt="PREVIEW OUTPUT" src="../images/studio-preview-output.png" /></p>
<p>Now, add an <strong>Apply Mapping</strong> transform by clickinng on the <strong>SQL</strong> node first to highlight it, then click on <strong>Transform</strong> dropdown icon and choose <strong>Apply Mapping</strong> from the list.</p>
<p>A new <strong>Apply Mapping</strong> node will be linked to the <strong>SQL</strong> node. Click on this new <strong>Apply Mapping</strong> node to highligt it and do the following:</p>
<ul>
<li>Click on <strong>Transform</strong> tab</li>
<li>Change Source key <strong>full_name</strong> to <strong>c_full_name</strong></li>
<li>Click on <strong>Output schema</strong> tab to see the change and <strong>Save</strong>.</li>
</ul>
<p><img alt="PREVIEW OUTPUT" src="../images/studio-apply-mapping.png" /></p>
<p>Finally, add a <strong>Target</strong> to the job. To do this, first click on the <strong>Apply Mapping</strong> node to highlight it, then click on <strong>Target</strong> dropdown, choose <strong>Amazon S3</strong> from the list and a new <strong>Amazon S3</strong> node will be linked to the <strong>Apply Mapping</strong> node. </p>
<p>Click on this new <strong>Amazon S3</strong> node to highligt it and do the following:</p>
<ul>
<li>Click on <strong>Data target properties - S3</strong> tab</li>
<li>Set <strong>Format</strong> to <strong>CSV</strong></li>
<li>Set <strong>S3 Target Location</strong> to <em>s3://$BUCKET_NAME/etl-ttt-demo/output/gluestreaming/total_clicks/</em> </li>
</ul>
<p>TIP: Switch back quickly to your Cloud9 enviroment and use the following command to build the entire path you need for the <strong>S3 Target Location</strong> above.</p>
<div class="codehilite"><pre><span></span><code><span class="nb">echo</span> <span class="s2">&quot;s3://</span><span class="nv">$BUCKET_NAME</span><span class="s2">/etl-ttt-demo/output/gluestreaming/total_clicks/&quot;</span>
</code></pre></div>

<h4 id="toc_0" align="center"> !!! You can now save this job for the last time but DO NOT RUN IT!!!! </h4>

<h4 id="3-creating-the-glue-streaming-job-cloning-jobs"><strong>3.</strong> Creating the Glue Streaming Job (Cloning Jobs!)<a class="headerlink" href="#3-creating-the-glue-streaming-job-cloning-jobs" title="Permanent link">&para;</a></h4>
<p>&lt;&lt;&lt;&lt;&lt; write the right stuff</p>
<p>[CLONE THE DUMMY JOB AND REPLACE THE CSV WEB_PAGE SOURCE BY THE KINESIS WEB_PAGE STREAMING TABLE]<br />
!!!! RUN THE JOB BUT DON'T SEND ANY STREAMING DATA YET!!!!<br />
(SETUP EVENT BRIDGE LAB FIRST !!!!!!</p>
<p>&lt;&lt;&lt;&lt;&lt; write the right stuff</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../02-GlueComponentsLab/02-glue-components-lab/" class="md-footer__link md-footer__link--prev" aria-label="Previous: GLUE DATABASE, TABLES, CONNECTIONS, CRAWLERS, CLASSIFIERS" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              GLUE DATABASE, TABLES, CONNECTIONS, CRAWLERS, CLASSIFIERS
            </div>
          </div>
        </a>
      
      
        
        <a href="../../04-OrchestrationLab/04-orchestration-lab/" class="md-footer__link md-footer__link--next" aria-label="Next: ORCHESTRATION &amp; DATA ANALYSIS" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              ORCHESTRATION & DATA ANALYSIS
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.748e2769.min.js"></script>
      
    
  </body>
</html>