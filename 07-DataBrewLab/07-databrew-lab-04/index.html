
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>WORKING WITH RECIPES & PROJECTS - Amazon ETL Train-The-Trainer Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5-creating-a-databrew-project" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Amazon ETL Train-The-Trainer Workshop" class="md-header__button md-logo" aria-label="Amazon ETL Train-The-Trainer Workshop" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Amazon ETL Train-The-Trainer Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WORKING WITH RECIPES & PROJECTS
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vfreitas23/aws-etl-ttt-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    vfreitas23/aws-etl-ttt-workshop
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Amazon ETL Train-The-Trainer Workshop" class="md-nav__button md-logo" aria-label="Amazon ETL Train-The-Trainer Workshop" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Amazon ETL Train-The-Trainer Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vfreitas23/aws-etl-ttt-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    vfreitas23/aws-etl-ttt-workshop
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../000-Intro/000-intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          How to Start?
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="How to Start?" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          How to Start?
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/001-intro/" class="md-nav__link">
        Intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          AWS Event
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="AWS Event" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          AWS Event
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/AWSEvent/002-ee-account-setup/" class="md-nav__link">
        Account Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/AWSEvent/003-cloud9-enviroment-setup/" class="md-nav__link">
        Prepare the Enviroment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Self Paced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Self Paced" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Self Paced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/004-signup-aws/" class="md-nav__link">
        Sign Up for AWS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/005-create-iam-user/" class="md-nav__link">
        Create IAM User
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/006-deploy-cfn/" class="md-nav__link">
        Deploy CloudFormation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../00-PreSteps/SelfPaced/007-cloud9-enviroment-setup/" class="md-nav__link">
        Prepare the Enviroment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Part 1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 1" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Part 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../01-MySQL-TPCDS/01-mysql-tpcds/" class="md-nav__link">
        TPCDS & RDS MySQL Lab
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Part 2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 2" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Part 2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../02-GlueComponentsLab/02-glue-components-lab/" class="md-nav__link">
        GLUE DATABASE, TABLES, CONNECTIONS, CRAWLERS, CLASSIFIERS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Part 3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 3" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Part 3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../03-StreamingLab/03-streaming-lab/" class="md-nav__link">
        GLUE (STUDIO) STREAMING
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Part 4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 4" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Part 4
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../04-OrchestrationLab/04-orchestration-lab/" class="md-nav__link">
        ORCHESTRATION & DATA ANALYSIS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Part 5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 5" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Part 5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../05-GlueStudioNotebookLab/05-gstudio-notebook-lab/" class="md-nav__link">
        MACHINE LEARNING WITH GLUE & GLUE STUDIO NOTEBOOKS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Part 6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 6" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Part 6
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../06-StepFunctionsLab/06-step-functions-lab/" class="md-nav__link">
        WORKFLOW ORCHESTRATION WITH AWS STEP FUNCTION
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Part 7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 7" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Part 7
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-databrew-lab-01/" class="md-nav__link">
        DATA QUALITY & PREPARATION WITH AWS GLUE DATABREW
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-databrew-lab-02/" class="md-nav__link">
        CREATE AND PROFILE 1ST DATASET
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-databrew-lab-03/" class="md-nav__link">
        CREATE AND PROFILE 2ND DATASET
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          WORKING WITH RECIPES & PROJECTS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        WORKING WITH RECIPES & PROJECTS
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#5-creating-a-databrew-project" class="md-nav__link">
    5. Creating a DataBrew Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-adding-steps-to-a-project" class="md-nav__link">
    6. Adding steps to a project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-sharing-managing-building-up-recipes" class="md-nav__link">
    6. Sharing, Managing &amp; Building up Recipes
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-databrew-lab-05/" class="md-nav__link">
        RUNNING GLUE DATABREW JOBS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../08-CleanUp/08-clean-up/" class="md-nav__link">
        Clean Up
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#5-creating-a-databrew-project" class="md-nav__link">
    5. Creating a DataBrew Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-adding-steps-to-a-project" class="md-nav__link">
    6. Adding steps to a project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-sharing-managing-building-up-recipes" class="md-nav__link">
    6. Sharing, Managing &amp; Building up Recipes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/vfreitas23/aws-etl-ttt-workshop/edit/master/docs/07-DataBrewLab/07-databrew-lab-04.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="toc_0" align="center">
WORKING WITH DATABREW RECIPES AND PROJECTS
</h1>

<h4 id="5-creating-a-databrew-project"><strong>5.</strong> Creating a DataBrew Project<a class="headerlink" href="#5-creating-a-databrew-project" title="Permanent link">&para;</a></h4>
<p>While the previous dataset profile is running, do the following:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>1.</strong> Click the <strong>PROJECTS</strong> icon on the left.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>2.</strong> Click the <strong>Create project</strong> button in the middle.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>3.</strong> Under <strong>Project details</strong> set <strong>Project name</strong> to <code>TopCustomers-PerBand</code>.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>4.</strong> Scroll down to <strong>Select a dataset</strong>, make sure the option <strong>My datasets</strong> is selected and then choose the <strong>IncomeBand</strong> dataset.</p>
<p><img alt="PROJECT1" src="../images/16-project-01.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>5.</strong> Scroll to <strong>Permission</strong>, select <strong>AWSGlueDataBrewServiceRole-etl-ttt-demo</strong> for <strong>Role name</strong>. Then, click on the <strong>Create project</strong> button at the bottom of the page. </p>
<blockquote>
<p>Once a project session is initiated, it may take couple of minutes for the session to become fully ready and operational. Wait for the following screen to complete loading:</p>
</blockquote>
<p><img alt="PROJECT2" src="../images/17-project-02.png" /></p>
<p>Once the project is fully ready, you will be presented with an spreedsheet-like view with multiple shortcut buttons at the top. The data you see there are the first 20 rows (default) of the <strong>IncomeBand</strong> dataset. Take your time to explore the shortcuts and the interface of DataBrew's project view.</p>
<p><img alt="DBVIEW1" src="../images/18-db-view-01.png" /></p>
<h4 id="6-adding-steps-to-a-project"><strong>6.</strong> Adding steps to a project<a class="headerlink" href="#6-adding-steps-to-a-project" title="Permanent link">&para;</a></h4>
<p>To start building a recipe, you first need to add steps to it. Let's manually add a first step to our project:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>1.</strong> On the top list of shortcuts, choose <strong>JOIN</strong>.</p>
<p><img alt="JOIN1" src="../images/19-join-transform-01.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>1.</strong> In the next screen, under <strong>Select dataset</strong>, select <strong>TopCustomer</strong> from the dropdown list and click <strong>Next</strong></p>
<p><img alt="JOIN1" src="../images/20-join-transform-02.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>1.</strong> In the next screen, choose a <strong>Right Join</strong> under <strong>Select join type</strong>. Then do the following:</p>
<ul>
<li>Under <strong>Table A</strong> (IncomeBand), choose <strong>ib_income_band_sk</strong></li>
<li>Under <strong>Table B</strong> (TopCustomer), choose <strong>ib_range_id</strong></li>
<li>Under <strong>Column List</strong>, uncheck the column <strong>ib_income_band_sk</strong> of source table <strong>Table A</strong></li>
</ul>
<p>Your screen should look like this:</p>
<p><img alt="JOIN1" src="../images/21-join-transform-03.png" /></p>
<p><br/></p>
<p>After adding this first <strong>JOIN step</strong> you can now see the results of a <strong>Right Join</strong> between <strong>IncomeBand</strong> dataset and <strong>TopCustomer</strong> dataset in which the columns <strong>ib_income_band_sk</strong> and <strong>ib_range_id</strong> were used as the <strong>JOINing</strong> columns.</p>
<p><img alt="JOIN1" src="../images/22-join-transform-04.png" /></p>
<blockquote>
<p>If you recall, the <strong>ib_range_id</strong> column was added as part of the <strong>Machine Learning</strong> lab. Essentially, the idea was to randomly assign to every customer an <strong>Income Band ID</strong> (ib_range_id) which would fall under a specific upper/lower bound range.</p>
</blockquote>
<h4 id="6-sharing-managing-building-up-recipes"><strong>6.</strong> Sharing, Managing &amp; Building up Recipes<a class="headerlink" href="#6-sharing-managing-building-up-recipes" title="Permanent link">&para;</a></h4>
<p>Now that you have manually added a step that joins both datasets, let's leverage an <strong>already-made Recipe</strong> to automatically add the rest of the steps. Run the following code to download the <strong>Recipe</strong>.</p>
<div class="codehilite"><pre><span></span><code>mkdir -p /tmp/dsd/databrew-recipe/
aws s3 cp s3://ee-assets-prod-<span class="si">${</span><span class="nv">AWS_REGION</span><span class="si">}</span>/modules/31e125cc66e9400c9244049b3b243c38/v1/downloads/etl-ttt-workshop/databrew/TopCustomers-PerBand-recipe.json  /tmp/dsd/databrew-recipe/TopCustomers-PerBand-recipe.json

aws s3 cp --recursive /tmp/dsd/databrew-recipe/ s3://<span class="nv">$BUCKET_NAME</span>/etl-ttt-demo/databrew-recipe/ 
</code></pre></div>

<p>Go to your <a href="https://s3.console.aws.amazon.com/s3">S3 Bucket</a> and navigate to: <strong>s3://\$BUCKET_NAME/etl-ttt-demo/databrew-recipe/</strong>. Download the file named: <strong>TopCustomers-PerBand-recipe.json</strong>. <em>(Keep this file in a known location in your computer.)</em></p>
<p><img alt="S3" src="../images/23-s3-download-recipe.png" /></p>
<blockquote>
<p>The idea is to simulate the situation where someone else in your team has already worked on the necessary steps to prepare this particular data and it is now sharing this with you. By sharing recipes you are encouraging work reusability and speeding up team's productivity.</p>
</blockquote>
<p>Now, do the following to <strong>Upload a Recipe</strong> to your <strong>Glue DataBrew's Recipe</strong> enviroment:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>1.</strong> Click the <strong>RECIPES</strong> icon on the left.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>2.</strong> Click on the <strong>Upload recipe</strong> button in the far right.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>3.</strong> Enter a <strong>Recipe name</strong> such as: <code>team-shared-recipe</code>. Then add a description too: <code>Recipe shared from my org's data analyst team - Note: Not the final version!</code>.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>4.</strong> Click on the <strong>Choose File</strong> button, navigate to where you downloaded the recipe file <strong>TopCustomers-PerBand-recipe.json</strong> in your computer and upload it.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>5.</strong> Click on the <strong>Create and publish recipe</strong> button at the bottom to complete the <strong>Recipe's uploading and publishing</strong> process.</p>
<p><img alt="RECIPE1" src="../images/24-recipe-upload-and-pub.png" /></p>
<p>Once the recipe has been uploaded and publish you can now leverage it into your project. To do so:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>6.</strong> Click back on the <strong>PROJECTS</strong> icon on the left and reonpen your project <strong>TopCustomers-PerBand</strong>.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>7.</strong> On the far right of your screen, look for a <strong>3-dot icon (...)</strong> labeled <strong>More</strong>, then click on <strong>Import recipe</strong>.</p>
<blockquote>
<p><em>(If you can't find it, click on the icon</em> <strong>RECIPE</strong> <em>in the far top right of the page to expand the recipe panel)</em>
<img alt="RECIPE1" src="../images/25-recipe-import-01.png" /></p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>8.</strong> On the pop-up screen, check the <strong>team-shared-receipt</strong> and click <strong>Next</strong>.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>9.</strong> On the next page, keep <strong>Append</strong> selected and click <strong>Next</strong> again to start validating each step within this recipe.</p>
<p>There will be <strong>22 steps</strong> to be validated. Just allow for the validation process to complete and you should see all the <strong>22 steps greening out</strong> like the following picture:</p>
<p><img alt="RECIPE1" src="../images/25-recipe-import-02.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>10.</strong> Click on the <strong>Import</strong> button to finish the import and append all the recipe's steps to your current project's recipe.</p>
<p>After importing all the steps, you should notice that the data representation will change accordingly and you will see the following changes:</p>
<ul>
<li>The columns <strong>ib_lower_bound</strong> and <strong>ib_upper_bound</strong> has been changed to Decimal (with a thousand separator) and they turned into a combined single column named <strong>Salary Band</strong></li>
<li>Some columns were renamed (mostly, the <strong>c_</strong> portion of them was removed despite other changes in their names)</li>
<li>A new column (with a <strong>date format/type</strong>) named <strong>date_of_birth</strong> has been created (by merging <strong>c_birth_month</strong>, <strong>c_birth_day</strong> and <strong>c_birth_year</strong>)</li>
</ul>
<p>To complete the data preparation, let's do few more things to this recipe:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>11.</strong> First, lets reorder some steps. To do that click on the tiny icon that says <strong>Reorder Steps</strong> when you hover the mouse over it (<em>near to where it says</em> <strong><em>Applied steps(22) | Clear all</em></strong> )</p>
<p><img alt="REORDER" src="../images/26-reorder-steps.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>12.</strong> A pop-up windown will appear. There, click and hold the <strong>tiny 6 dot icon</strong> in front of the number 20 (Step 20) and move it up to after the step 15. Repeat this process for steps 21 and 22. Once done, your scree should look like the following:</p>
<p><img alt="REORDER" src="../images/26-reorder-steps2.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> Click <strong>Next</strong> to re-validate the steps then <strong>Done</strong> to apply this reorder operation to the recipe.</p>
<p>Now, let's create an Age column using a function called <strong>DATEDIFF</strong>. This function calculates the <strong>difference between two dates</strong> and return a value that can be expressed in <strong>Days, Months, Years</strong>, etc. In this case, let's express it as <strong>Year</strong> in order to have the actual age of a person in a column.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>15.</strong> Click on the tiny icon that says <strong>Add Step</strong> when you hover the mouse over it (<em>near to</em> <strong><em>Reorder Steps</em></strong> <em>you justed clicked in step 11</em>). In the search box that appear that says <strong>"Find Steps"</strong> type: <code>DATEDIFF</code> and select it from the dropdown list.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> You must now define the entries for this function. Do the following:</p>
<ul>
<li>For Value 1 you should select the option <strong>Select source column</strong> and choose the column <strong>date_of_birth</strong></li>
<li>For Value 2 you should keep <strong>Enter custome value</strong> and select today's date in the calendar.</li>
<li>Choose <strong>Unit</strong> as <strong>Years</strong></li>
<li>Type <code>Age</code> in the <strong>Destination Column</strong> field</li>
</ul>
<p>See the picture below for reference:</p>
<p><img alt="DATEDIFF" src="../images/27-datediff.png" /></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> Click <strong>Apply</strong> to apply the changes.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> Now, you can drop the unecessary columns. On the shortcut bar, click on the fifth icon that says <strong>COLUMN</strong> then choose <strong>Delete</strong>.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> A new step window will appear to the left. On the <strong>Source columns</strong> drop down choose:</p>
<ul>
<li><strong>date_of_birth</strong></li>
<li><strong>c_birth__month</strong></li>
<li><strong>c_login</strong></li>
<li><strong>match_id</strong></li>
<li><strong>ib_range_id</strong></li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> Click <strong>Apply</strong> for the last time.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>13.</strong> Finally, click on the icon <strong>Publish</strong> (above the <strong>Add Steps</strong> and <strong>Reoder Steps</strong> icons. Write a meaningful description to your recipe such as <code>This is the final recipe!</code> and click <strong>Publish</strong>.</p>
<p><img alt="DATEDIFF" src="../images/28-publish-recipe.png" /></p>
<p>You have now fully prepared your dataset and created a new recipe with combines steps that have been shared with you and steps added by yourself. Now, you are ready to operationalize all these steps in your recipe into a Glue DataBrew job.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../07-databrew-lab-03/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CREATE AND PROFILE 2ND DATASET" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              CREATE AND PROFILE 2ND DATASET
            </div>
          </div>
        </a>
      
      
        
        <a href="../07-databrew-lab-05/" class="md-footer__link md-footer__link--next" aria-label="Next: RUNNING GLUE DATABREW JOBS" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              RUNNING GLUE DATABREW JOBS
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>